<script setup>
import { onMounted, ref } from 'vue';
const props = defineProps({
  id: String,
  footer: Boolean,
  time: Number
})

const startCamera = () => {
    const video = document.getElementById(`${props.id}-video`)
    if (navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
          .then((stream) => {
            video.srcObject = stream
          })
          .catch(function(error) {
              console.log("Something went wrong!")
          });
    }
}

onMounted(() => {
  startCamera()
})
</script>

<template>
  <div class="flex flex-col w-full">
    <div :class="['w-full h-full overflow-hidden', { 'max-h-[80vh]': footer }]">
      <video v-show="id" :id="`${id}-video`" autoplay class="w-full"></video>
    </div>
    <div class="w-full px-5 flex justify-between -mt-12 h-12 z-10 bottom-0 text-white">
      <span class="w-1/2 flex flex-row items-center">
        <span id="tools-left" class="block bg-white h-12 w-24"></span>
        <span v-if="time" class="inline-block">{{ new Date(time * 1000).toISOString().slice(11, 19) }}</span>
      </span>
      <span id="tools-right" class="block bg-white h-12 w-1/2 align-center"></span>
    </div>
    <slot/>
  </div>
</template>

<style lang="css" scoped>
  #tools-left {
    mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 50"><path class="st0" d="M52.65,24.15l5.35-5.05v16.26l-5.44-4.98v-0.06h-3.52v-6.16H52.65z M63.05,27.24c0-2.06-1.36-3.78-3.23-4.36 v8.73C61.69,31.02,63.05,29.3,63.05,27.24z M59.86,18.03l-0.04,0.13v2c2.92,1.16,4.86,3.92,4.86,7.08c0,3.16-1.94,5.92-4.86,7.08v2 l0.04,0.13c4.08-1.27,6.82-4.97,6.82-9.21C66.68,23,63.94,19.3,59.86,18.03z M13.98,36.31h4.19V18.03h-4.19V36.31z M23.75,18.03 v18.28h4.19V18.03H23.75z"/></svg>');
    mask-repeat: no-repeat;
    mask-position: left center;
  }
  #tools-right {
    mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 295 50"><path d="M137.89,14.1h-17.06c-2.08,0-3.77,1.69-3.77,3.77v12.45c0,2.08,1.69,3.78,3.77,3.78h17.06 c2.08,0,3.77-1.69,3.77-3.78V17.87C141.67,15.79,139.98,14.1,137.89,14.1z M139.67,30.32c0,0.98-0.8,1.78-1.77,1.78h-17.06 c-0.98,0-1.77-0.8-1.77-1.78V17.87c0-0.98,0.8-1.77,1.77-1.77h17.06c0.98,0,1.77,0.8,1.77,1.77V30.32z M41.15,15.1H24.1 c-1.53,0-2.77,1.24-2.77,2.77v12.45c0,1.53,1.24,2.77,2.77,2.77h17.06c1.53,0,2.77-1.24,2.77-2.77V17.87 C43.93,16.34,42.68,15.1,41.15,15.1z M31.95,23.19h-2v-0.54h-2.4v3.44h2.4v-0.54h2v1.03c0,0.83-0.67,1.5-1.5,1.5h-3.4 c-0.83,0-1.5-0.67-1.5-1.5v-4.44c0-0.83,0.67-1.5,1.5-1.5h3.4c0.83,0,1.5,0.67,1.5,1.5V23.19z M40.65,23.19h-2v-0.54h-2.4v3.44h2.4 v-0.54h2v1.03c0,0.83-0.67,1.5-1.5,1.5h-3.4c-0.83,0-1.5-0.67-1.5-1.5v-4.44c0-0.83,0.67-1.5,1.5-1.5h3.4c0.83,0,1.5,0.67,1.5,1.5 V23.19z M89.9,18.97c-0.38-0.72-1.27-1-1.99-0.62l-2.05,1.08c-0.5-0.41-1.06-0.75-1.66-1.01v-2.31c0-0.81-0.66-1.47-1.47-1.47H80.1 c-0.81,0-1.47,0.66-1.47,1.47v2.31c-0.34,0.15-0.66,0.32-0.97,0.52l-1.91-1.31c-0.67-0.46-1.59-0.29-2.05,0.38l-1.5,2.17 c-0.46,0.67-0.29,1.59,0.38,2.05l1.9,1.31c-0.09,0.45-0.14,0.91-0.14,1.39c0,0.18,0.01,0.37,0.03,0.55l-2.05,1.08 c-0.72,0.38-1,1.27-0.62,1.99l1.23,2.33c0.38,0.72,1.27,1,1.99,0.62l2.05-1.08c0.5,0.41,1.06,0.75,1.66,1.01v2.31 c0,0.81,0.66,1.47,1.47,1.47h2.64c0.81,0,1.47-0.66,1.47-1.47v-2.31c0.34-0.15,0.66-0.32,0.97-0.52l1.91,1.31 c0.67,0.46,1.59,0.29,2.05-0.38l1.5-2.17c0.46-0.67,0.29-1.59-0.38-2.05l-1.9-1.31c0.09-0.45,0.14-0.91,0.14-1.39 c0-0.18-0.01-0.37-0.03-0.55l2.05-1.08c0.72-0.38,1-1.27,0.62-1.99L89.9,18.97z M81.41,27.7c-1.54,0-2.79-1.25-2.79-2.79 s1.25-2.79,2.79-2.79s2.79,1.25,2.79,2.79S82.96,27.7,81.41,27.7z M127.93,23.19h8.93v6.6h-8.93V23.19z M164.97,33.1h24.33V16.15 h-24.33V33.1z M166.97,18.15h20.33V31.1h-20.33V18.15z M224.9,29.24l7.3,7.72h-14.23L224.9,29.24z M237.2,17.87v11.45 c0,2.08-1.69,3.78-3.77,3.78h-2.12v-2h2.12c0.98,0,1.77-0.8,1.77-1.78V17.87c0-0.98-0.8-1.77-1.77-1.77h-17.06 c-0.98,0-1.77,0.8-1.77,1.77v11.45c0,0.98,0.8,1.78,1.77,1.78h2.53v2h-2.53c-2.08,0-3.77-1.69-3.77-3.78V17.87 c0-2.08,1.69-3.77,3.77-3.77h17.06C235.51,14.1,237.2,15.79,237.2,17.87z M282.67,14.78v6.24h-2v-4.24h-4.24v-2H282.67z M263.39,14.78h6.24v2h-4.24v4.24h-2V14.78z M265.39,32.06h4.24v2h-6.24v-6.24h2V32.06z M280.67,27.81h2v6.24h-6.24v-2h4.24V27.81z" /></svg>');
    mask-repeat: no-repeat;
    mask-position: right center;
  }
</style>
